<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
   
   
    <script>
    fetch("https://www.freecodecamp.com/map-aside")
        .then(e=>e.text())
        .then(parse);
        
        function parse(d){
            let div = document.createElement('div');
            div.innerHTML=d;
            div.style.display="none";
            div.id="paste";
            document.body.appendChild(div);
            let blocks = [...document.querySelectorAll('.certBlock')];
            let json={};
            blocks.forEach(block=>{
                let headersTopics = [...block.querySelectorAll('.no-link-underline, a[target]')];
                let currentHeader="";
                headersTopics.forEach(n=>{
                    
                    if(n.nodeName==="SPAN"){
                        currentHeader = n.nextSibling.textContent;
                        json[currentHeader]=[];
                    } else if (n.nodeName==="A"){
                        let temp = n.firstElementChild;
                        //console.log(temp)
                        json[currentHeader].push(temp.textContent);
                    } else {
                        console.error("FOUND " + n.nodeName);
                    }
                })
            });
            let output = JSON.stringify(json);
            
            let pre =document.createElement('pre');
            pre.innerHTML = output;
            document.body.appendChild(pre)
            /*let blocks = [...document.querySelectorAll('.certBlock')];
            blocks.forEach(block=>{
                let headers = [...block.querySelectorAll('.no-link-underline')];
                headers.forEach(header=>{
                    let h3 = header.nextSibling.textContent;
                    let topics = header.querySelectorAll('a[target]');
                    console.log(header)
                })
                //console.log(headers[0].nextSibling.textContent)
            })*/
            /*
            let tables = [...document.querySelectorAll('.table')];
            let json = {};
            tables.forEach(t=>{
                let header = t.querySelector('th.col-xs-5').textContent;
                json[header]=[];
                let topics = [...t.querySelectorAll('.col-xs-5.hidden-xs')];
                topics.forEach(top=>{
                    json[header].push(top.textContent);
                })
            });
            let o={}
            let app = document.createElement('pre');
            
            json.Challenges.forEach(c=>{
                app.textContent+=c+"\n";
            })
            document.body.appendChild(app)
            console.log(json);
            
            
            div.innerHTML="";
            console.log(x)*/
            
        }
    </script>
</body>
</html>